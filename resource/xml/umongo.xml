<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : UMongo.xml
    Created on : January 31, 2011, 3:11 PM
    Author     : antoine
    Description:
        Purpose of the document follows.
-->

<com.edgytech.umongo.UMongo id="umongo" start="start" stop="stop">
    <IconGroup id="icons" folder="img" resource="true"/>
    <com.edgytech.umongo.GlobalStore id="globalStore">
        <com.edgytech.umongo.DocumentMenu id="documentMenu">
            <MenuItem id="update" call="update" showDialog="false">
                <FormDialog>
                    <com.edgytech.umongo.DocBuilderField id="upUpdate" label="Update" toolTipText="Update to apply to document, in JSON format"/>
                </FormDialog>
            </MenuItem>
            <MenuItem id="remove" call="remove">
                <ConfirmDialog text="Are you sure you want to remove this document?"/>
            </MenuItem>
            <MenuSeparator/>
            <MenuItem id="copyValue" call="copyValue"/>
        </com.edgytech.umongo.DocumentMenu>
        <com.edgytech.umongo.DocumentFieldMenu id="documentFieldMenu">
            <MenuItem id="set" call="set"/>
            <MenuItem id="unset" call="unset"/>
            <MenuSeparator/>
            <MenuItem id="compress" call="compress"/>
            <MenuItem id="decompress" call="decompress"/>
            <MenuSeparator/>
            <MenuItem id="copyField" call="copyField"/>
            <MenuItem id="copyValue" call="copyValue"/>
        </com.edgytech.umongo.DocumentFieldMenu>
        <com.edgytech.umongo.OptionDialog id="optionDialog">
            <TabbedDiv>
                <Div id="queryOption">
                    <CheckBox id="slaveOk" toolTipText="When turned on, read queries will be directed to slave servers instead of the primary server"/>
                    <CheckBox id="noTimeout" toolTipText="If turned on, the cursor will not be timed out on the server."/>
                    <CheckBox id="tailable" toolTipText="Tailable means cursor is not closed when the last data is retrieved. You can resume using the cursor later, if more data exists."/>
                    <CheckBox id="awaitData" toolTipText="Use with TailableCursor. If cursor is at the end of the data, it blocks for a while rather than returning no data."/>
                    <CheckBox id="exhaust" toolTipText="Stream the data down full blast in multiple 'getMore' packages, on the assumption that the client will fully read all data queried."/>
                    <CheckBox id="partial" toolTipText="Allows mongos to return partial results from a sharded system if any shard is down."/>
                    <CheckBox id="opLogReplay" toolTipText="Internal replication use only - driver should not set"/>
                </Div>
                <Div id="writeConcern">
                    <IntSpinner id="writeFactor" minValue="0" value="0" toolTipText="Sets the number of servers that write should be acknowledged from. 0 means 'fire-and-forget'."/>
                    <TextField id="writePolicy" toolTipText="Sets the write policy. If set, will override the write factor number."/>
                    <IntSpinner id="writeTimeout" minValue="0" value="0" toolTipText="Timeout in milliseconds for primary server to ensure that write operation was fulfilled on all servers."/>
                    <CheckBox id="fsync" value="false" toolTipText="Forces syncing of memory to disk on the server before acknowledgment of write operation success."/>
                    <CheckBox id="jsync" value="false" toolTipText="Waits that the data has been commited to the journal on disk."/>
                </Div>
                <Div id="readPreference">
                    <ComboBox id="rpPreference" label="Read Preference" items="Primary;Primary Preferred;Secondary;Secondary Preferred;Nearest" value="0" toolTipText="The read preference mode. Primary to read from master, Secondary to read from slaves."/>
                </Div>
            </TabbedDiv>
        </com.edgytech.umongo.OptionDialog>
        <com.edgytech.umongo.ErrorDialog id="errorDialog">
            <Text id="errorIcon" icon="error.png" iconGroup="icons"/>
            <Text id="errorIn" label="Error in" field="true"/>
            <Text id="errorMsg" label="Message" field="true"/>
            <Text id="errorCode" label="Code" field="true"/>
            <TextArea id="errorTrace" label="Trace" rows="20" columns="50" editable="false"/>
        </com.edgytech.umongo.ErrorDialog>
        <com.edgytech.umongo.AutoUpdateDialog id="autoUpdateDialog">
            <ComboBox id="autoType" lable="Update Type" items="Refresh;Append"/>
            <IntSpinner id="autoInterval" label="Interval" minValue="0" value="5" toolTipText="Interval between each update, in seconds"/>
            <IntSpinner id="autoCount" label="Count" minValue="0" value="100" toolTipText="Number of times to update, 0 means forever"/>
        </com.edgytech.umongo.AutoUpdateDialog>
        <com.edgytech.umongo.ExportDialog id="exportDialog" helpFile="/html/importHelp.html">
            <FileSelectorField id="outputFile">
                <FileSelectorDialog type="SAVE" mode="FILES_ONLY"/>
            </FileSelectorField>
            <ComboBox id="format" items="JSON Legacy;JSON Legacy Array;JSON Strict;JSON Strict Array;CSV;BSON" toolTipText="the file format"/>
            <TextField id="fields" toolTipText="Comma-separated list of fields to export, mandatory for CSV format"/>
            <CheckBox id="continueOnError" toolTipText="Continue after an error occurs"/>
            <Div id="csvOptions" label="CSV Options" titled="true">
                <TextField id="header" toolTipText="Optional, the CSV header line"/>
                <TextField id="delimiter" toolTipText="Optional, the character for delimiting values"/>
            </Div>
        </com.edgytech.umongo.ExportDialog>
        <com.edgytech.umongo.ImportDialog id="importDialog" helpFile="/html/importHelp.html">
            <FileSelectorField id="inputFile">
                <FileSelectorDialog type="OPEN" mode="FILES_ONLY"/>
            </FileSelectorField>
            <ComboBox id="format" items="JSON;JSON Array;Multi-line JSON;CSV;BSON" toolTipText="the file format"/>
            <CheckBox id="continueOnError" toolTipText="whether to continue importing after an error occurs"/>
            <CheckBox id="dropCollection" toolTipText="Drop the collection before importing"/>
            <CheckBox id="upsert" toolTipText="Upsert values instead of insert"/>
            <TextField id="upsertFields" toolTipText="Comma-separated list of fields to upsert by. If not specified, save() will be used."/>
            <CheckBox id="bulk" value="false" toolTipText="If turned on, the bulk insert function of the driver will be used. It may be faster but more client memory will be used, and error reporting is not accurate."/>
            <Div id="csvOptions" label="CSV Options" titled="true">
                <TextField id="delimiter" toolTipText="Optional, the character for delimiting values"/>
                <TextField id="quote" toolTipText="Optional, the character for quoting strings"/>
                <com.edgytech.umongo.DocBuilderField id="template" toolTipText="Optional, the document template"/>
            </Div>
        </com.edgytech.umongo.ImportDialog>
        <ConfirmDialog id="lockingOperationDialog" text="Are you sure you want to run this command? It can potentially lock the db for a long time."/>
        <com.edgytech.umongo.MongoPanel id="mongoPanel">
            <MenuBar id="menu" zone="NORTH" minHeight="50" prefHeight="50">
                <Text id="icon" icon="mongo_leaf_16.png" iconGroup="icons" toolTipText="Mongo"/>
                <Menu id="mongo">
                    <MenuItem id="createDB" label="Create DB" call="createDB">
                        <FormDialog>
                            <TextField id="createDbName" label="DB Name" nonEmpty="true"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="refresh" label="Refresh" call="refresh" icon="stock_refresh.png" iconGroup="icons" key="r" keyMod="cmd+shift"/>
                    <MenuSeparator/>
                    <MenuItem id="close" label="Close" call="close" icon="dialog_close.png" iconGroup="icons"/>
                </Menu>
                <Menu id="command">
                    <MenuItem id="serverStatus" call="serverStatus"/>
                    <MenuItem id="isMaster" call="isMaster"/>
                    <MenuSeparator/>
                    <MenuItem id="currentOps" call="currentOps">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="currentOpsQuery" label="Query Filter" toolTipText="Optional, a query to filter operations. Use {'$all': 1} to also see internal commands."/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="killOp" call="killOp">
                        <FormDialog>
                            <IntField id="killOpId" label="opid" toolTipText="ID of the operation to kill, should be visible from Current Ops"/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
                <Menu id="admin">
                    <MenuItem id="authenticate" call="authenticate">
                        <FormDialog>
                            <TextField id="authUser" toolTipText="The user name to authenticate with admin database." nonEmpty="true"/>
                            <PasswordField id="authPassword" toolTipText="The password to authenticate with admin database." nonEmpty="true"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="shutdown" call="shutdown">
                        <ConfirmDialog text="Are you sure you want to shutdown this mongo server?"/>
                    </MenuItem>
                </Menu>
                <Menu id="tools">
                    <MenuItem id="fsync" call="fsync"/>
                    <CheckBoxMenuItem id="fsyncAndLock" call="fsyncAndLock"/>
                    <MenuSeparator/>
                    <MenuItem id="showLog" call="showLog"/>
                    <MenuItem id="logRotate" call="logRotate"/>
                    <MenuSeparator/>
                    <MenuItem id="cloneDB" label="Clone DB" call="cloneDB">
                        <FormDialog>
                            <TextField id="cloneDBHost" label="From Host" toolTipText="Host to copy DB from" nonEmpty="true"/>
                            <TextField id="cloneDBFrom" label="Source DB Name" nonEmpty="true"/>
                            <TextField id="cloneDBTo" label="Target DB Name"/>
                            <CheckBox id="cloneDBSlaveOk" label="Slave Ok" toolTipText="Allow the database to be cloned from a slave"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="options" call="options"/>
                </Menu>
            </MenuBar>
            <Zone zone="CENTER">
                <Div zone="NORTH" gap="true" bgColor="255;255;255">
                    <Text id="version" label="Driver Version" field="true"/>
                    <Text id="queryOptions" field="true"/>
                    <com.edgytech.umongo.DocField id="writeConcern"/>
                    <com.edgytech.umongo.DocField id="readPreference"/>
                    <Text id="masterServer" field="true"/>
                    <Text id="seedServers" field="true"/>
                    <Text id="activeServers" field="true"/>
                    <Text id="maxObjectSize" field="true"/>
                </Div>
            </Zone>
        </com.edgytech.umongo.MongoPanel>
        <com.edgytech.umongo.DbPanel id="dbPanel">
            <MenuBar id="menu" zone="NORTH" minHeight="50" prefHeight="50">
                <Text id="icon" icon="database.png" iconGroup="icons" toolTipText="Database"/>
                <Menu id="database">
                    <MenuItem id="createCollection" call="createCollection">
                        <FormDialog>
                            <TextField id="createCollName" label="Collection Name" nonEmpty="true"/>
                            <CheckBox id="createCollCapped" label="Is Capped"/>
                            <IntField id="createCollSize" label="Max Size" toolTipText="If capped, maximum size in bytes"/>
                            <IntField id="createCollCount" label="Max Count" toolTipText="If capped, maximum number of documents"/>
                            <CheckBox id="createCollAutoIndex" label="Auto Index Id" value="true" toolTipText="To automatically create an index on _id field, default is true"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="refresh" label="Refresh" call="refresh" icon="stock_refresh.png" iconGroup="icons" key="r" keyMod="cmd+shift"/>
                    <MenuSeparator/>
                    <MenuItem id="dropDatabase" label="Drop Database" call="dropDatabase" icon="stock_delete.png" iconGroup="icons">
                        <ConfirmDialog text="Are you sure you want to drop this database?"/>
                    </MenuItem>
                </Menu>
                <Menu id="command">
                    <MenuItem id="commandCmd" label="Command" call="command">
                        <FormDialog>
                            <Text value="Input either a command name, or a JSON command"/>
                            <TextField id="commandStr" label="Command Name"/>
                            <com.edgytech.umongo.DocBuilderField id="commandJson" label="JSON Command"/>
                            <CheckBox id="commandHelp" label="Show Help"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="listCommands" call="listCommands"/>
                    <MenuSeparator/>
                    <MenuItem id="statsCmd" label="Stats" call="stats"/>
                    <MenuSeparator/>
                    <MenuItem id="eval" label="Execute JavaScript" call="eval" toolTipText="Evaluate Javascript code on the database side">
                        <FormDialog>
                            <TextArea id="evalCode" label="JS Code" toolTipText="JavaScript code to evaluate on the server" nonEmpty="true"/>
                            <CheckBox id="evalNoLock" label="No Lock" toolTipText="Run the eval without the taking the global write lock"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="dbHash" label="Generate Hash" call="dbHash">
                        <ConfirmDialog text="This command triggers a full data scan and requires a long time to run. Do you wish to proceed?"/>
                    </MenuItem>
                </Menu>
                <Menu id="user">
                    <MenuItem id="authenticate" call="authenticate">
                        <FormDialog>
                            <TextField id="authUser" label="User" nonEmpty="true"/>
                            <PasswordField id="authPassword" label="Password" nonEmpty="true"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="manageUsers" call="manageUsers" showDialog="false">
                        <FormDialog buttons="OK" okLabel="Done">
                            <Zone>
                                <Scroller zone="CENTER" preferredSize="320;-1">
                                    <List id="userList" items=""/>
                                </Scroller>
                                <Div axis="Y" zone="EAST">
                                    <Button id="editUser" icon="edit.png" iconGroup="icons" toolTipText="Edit the user" call="editUser"/>
                                    <Button id="addUser" icon="add.png" iconGroup="icons" toolTipText="Add a new user" call="addUser"/>
                                    <Button id="removeUser" icon="dialog-close_16.png" iconGroup="icons" toolTipText="Remove the user" call="removeUser"/>
                                </Div>
                            </Zone>
                        </FormDialog>
                        <ConfirmDialog id="userChange" text="Do you wish to proceed with the User change?"/>
                        <com.edgytech.umongo.UserDialog id="userDialog" buttons="OK_CANCEL" okLabel="Save" save="false">
<!--                            <Text id="userRO" field="true" label="User" toolTipText="the username" visible="false"/>-->
                            <TextField id="user" value="" toolTipText="the username" nonEmpty="true"/>
                            <PasswordField id="password" value="" toolTipText="the password" nonEmpty="true"/>
                            <TextField id="userSource" value="" toolTipText="Optional, A string that holds the name of the database that contains the credentials for the user. Use $external for external source."/>
                            <Div id="roles" label="User Roles" titled="true">
                                <CheckBox id="read" toolTipText="Provides users with the ability to read data from any collection within a specific logical database"/>
                                <CheckBox id="readWrite" toolTipText="Provides users with the ability to read from or write to any collection within a specific logical database"/>
                                <CheckBox id="dbAdmin" toolTipText="Provides the ability to perform administrative operations within the scope of this logical database"/>
                                <CheckBox id="userAdmin" toolTipText="Allows users to read and write data to the system.users collection of any database"/>
                            </Div>
                            <Div id="rolesAdmin" label="Special Admin Roles" titled="true">
                                <CheckBox id="clusterAdmin" toolTipText="These privileges include but are not limited to replica set and sharded cluster administrative functions"/>
                                <CheckBox id="readAnyDatabase" toolTipText="provides users with the same read-only permissions as read, except it applies to all logical databases"/>
                                <CheckBox id="readWriteAnyDatabase" toolTipText="provides users with the same read and write permissions as readWrite, except it applies to all logical databases"/>
                                <CheckBox id="dbAdminAnyDatabase" toolTipText="provides users with the same access to user administration operations as dbAdmin, except it applies to all logical databases"/>
                                <CheckBox id="userAdminAnyDatabase" toolTipText="provides users with the same access to database administration operations as userAdmin, except it applies to all logical databases"/>
                            </Div>
                            <CheckBox id="version22" label="Legacy v2.2 format" value="false" toolTipText="If checked, will save the user in the legacy format for v2.2 and prior"/>
                        </com.edgytech.umongo.UserDialog>
                    </MenuItem>
                </Menu>
                <Menu id="sharding">
                    <MenuItem id="enableSharding" call="enableSharding"/>
                    <MenuItem id="shardingInfo" call="shardingInfo"/>
                    <MenuItem id="movePrimary" call="movePrimary" showDialog="false">
                        <FormDialog>
                            <ComboBox id="mvpToShard" label="To Shard" items="None" toolTipText="the new primary shard for this database"/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
                <Menu id="GridFS" label="GridFS">
                    <MenuItem id="uploadFile" call="uploadFile">
                        <FormDialog id="uploadFileDialog">
                            <FileSelectorField id="uploadFilePath" label="Local File">
                                <FileSelectorDialog type="OPEN" selectionMode="FILES_ONLY"/>
                            </FileSelectorField>
                            <TextField id="uploadFileName" label="File Name" toolTipText="Optional, Name of the file as stored on the server"/>
                            <TextField id="uploadContentType" toolTipText="Optional, Content type to associate with file"/>
                            <com.edgytech.umongo.DocBuilderField id="uploadMetadata" label="Metadata" toolTipText="Optional, JSON object representing the file's metadata"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="downloadFile" call="downloadFile">
                        <FormDialog id="downloadFileDialog">
                            <Text value="Specify a query object or a file name"/>
                            <com.edgytech.umongo.DocBuilderField id="downloadQuery" label="Query" toolTipText="Find the file using this query"/>
                            <TextField id="downloadFileName" label="File Name" toolTipText="Name of the file as stored on the server"/>
                            <FileSelectorField id="downloadFilePath" label="Save As">
                                <FileSelectorDialog type="SAVE" selectionMode="FILES_ONLY"/>
                            </FileSelectorField>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="listFiles" call="listFiles"/>
                    <MenuItem id="deleteFile" call="deleteFile">
                        <FormDialog id="deleteFileDialog">
                            <Text value="Specify a query object or a file name"/>
                            <com.edgytech.umongo.DocBuilderField id="deleteQuery" label="Query" toolTipText="Find the file using this query"/>
                            <TextField id="deleteFileName" label="File Name" toolTipText="Name of the file as stored on the server"/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
                <Menu id="tools">
                    <MenuItem id="profile" call="profile">
                        <FormDialog>
                            <ComboBox id="profileLevel" label="Level" items="0 - None;1 - Slow Queries;2 - All Queries" value="0" toolTipText="Profiling level for the database."/>
                            <IntField id="profileSlowMS" label="Slow MS" value="0" toolTipText="Time in millisecond over which a query is considered slow. 0 means use default."/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="analyzeProfilingData" call="analyzeProfilingData" toolTipText="Analyze the profiling data"/>
                    <MenuSeparator/>                    
                    <MenuItem id="repair" call="repair" toolTipText="Repair the database, which is a long operation involving re-saving all documents"/>
                    <MenuSeparator/>
                    <MenuItem id="addJSFunction" call="addJSFunction" label="Add JS Function">
                        <FormDialog id="addJSFunctionDialog" label="Add JS Function">
                            <TextField id="addJSFunctionName" label="Name" toolTipText="Name of the function" nonEmpty="true"/>
                            <TextArea id="addJSFunctionCode" label="Function Code" toolTipText="Code of the javascript function like 'function(){ ... }'" nonEmpty="true"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="findJSFunction" call="findJSFunction" label="Find JS Function">
                        <FormDialog id="findJSFunctionDialog" label="Find JS Function">
                            <TextField id="findJSFunctionName" label="Name" toolTipText="Name of the function. Leave Empty to get all functions."/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="options" call="options"/>
                </Menu>
            </MenuBar>
            <Zone zone="CENTER">
                <Div zone="NORTH" gap="true" bgColor="255;255;255">
                    <Text id="name" field="true"/>
                    <Text id="queryOptions" field="true"/>
                    <com.edgytech.umongo.DocField id="writeConcern"/>
                    <com.edgytech.umongo.DocField id="readPreference"/>
                    <com.edgytech.umongo.CmdField id="stats" cmd="dbstats"/>
                </Div>
            </Zone>
        </com.edgytech.umongo.DbPanel>
        <com.edgytech.umongo.CollectionPanel id="collectionPanel">
            <MenuBar id="menu" zone="NORTH" minHeight="50" prefHeight="50">
                <Text id="icon" icon="folder.png" iconGroup="icons" toolTipText="Collection"/>
                <Menu id="collection">
                    <MenuItem id="ensureIndex" label="Ensure Index" call="ensureIndex" icon="index.png" iconGroup="icons">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="eiKeys" label="Index Keys" toolTipText="keys to index by, in JSON format" nonEmpty="true"/>
                            <CheckBox id="eiUnique" label="Unique" toolTipText="If checked, index will be unique"/>
                            <CheckBox id="eiDropDups" label="Drop Duplicates" toolTipText="If creating a unique index, remove documents with duplicate keys"/>
                            <CheckBox id="eiSparse" label="Sparse" toolTipText="Make index sparse, meaning that documents missing the key will not be indexed"/>
                            <CheckBox id="eiBackground" label="Background" toolTipText="Create the index in the background without locking the database. Index creation will be slower."/>
                            <IntSpinner id="eiExpireAfter" label="Expire After Seconds" value="0" minValue="0" toolTipText="Specify a TTL value in seconds to create an expiring collection. The index must be on a time field."/>
                            <TextField id="eiName" label="Index Name" toolTipText="Optional, a custom name for the index"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="refresh" label="Refresh" call="refresh" icon="stock_refresh.png" iconGroup="icons" key="r" keyMod="cmd+shift"/>
                    <MenuItem id="rename" call="rename">
                        <FormDialog>
                            <TextField id="newName" nonEmpty="true"/>
                            <CheckBox id="dropTarget" value="false"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="doImport" label="Import" call="doImport"/>
                    <MenuItem id="export" call="export"/>
                    <MenuSeparator/>
                    <MenuItem id="dropCollection" label="Drop Collection" call="dropCollection" icon="stock_delete.png" iconGroup="icons">
                        <ConfirmDialog text="Are you sure you want to drop this collection?"/>
                    </MenuItem>
                </Menu>
                <Menu id="command">
                    <MenuItem id="statsCmd" label="Stats" call="stats"/>
                    <MenuItem id="group" call="group">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="grpKeys" label="Keys" toolTipText="Keys to group by, in JSON format" nonEmpty="true"/>
                            <com.edgytech.umongo.DocBuilderField id="grpQuery" label="Query" toolTipText="Query to filter the input, in JSON format"/>
                            <com.edgytech.umongo.DocBuilderField id="grpInitialValue" label="Initial Value" toolTipText="Initial value for the job, in JSON format" nonEmpty="true" value='{"count": 0}'/>
                            <TextArea id="grpReduce" label="Reduce JS Function" toolTipText="reduce javascript function with signature 'void function(obj, out)' where obj is the object to process and out is the current result for that key" nonEmpty="true" value="function(obj,out){ out.count += 1; }"/>
                            <TextArea id="grpFinalize" label="Finalize JS Function" toolTipText="optional finalize javascript function with signature 'void function(out)' where out is the result for that key"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="mapReduce" call="mapReduce">
                        <FormDialog>
                            <TextArea id="mrMap" label="Map JS Function" toolTipText="map javascript function with signature 'void function map()' which should contain one or more calls to emit(key, obj)" nonEmpty="true" value="function(){ emit(this._id, {count: 1}); }"/>
                            <TextArea id="mrReduce" label="Reduce JS Function" toolTipText="reduce javascript function with signature 'result reduce(key, values)' where key is the emit key and values is the list of values to reduce.'" nonEmpty="true" value="function(key, values) { total = 0; for (var i = 0; i &lt; values.length; ++i) { total += values[i].count; }; return {count: total}; }"/>
                            <TextArea id="mrFinalize" label="Finalize JS Function" toolTipText="optional finalize javascript function with signature 'result finalize(key, out)' where out is the result for that key"/>
                            <Div id="input" titled="true">
                                <com.edgytech.umongo.DocBuilderField id="mrQuery" label="Query" toolTipText="Query to filter the input, in JSON format"/>
                                <com.edgytech.umongo.DocBuilderField id="mrSort" label="Sort" toolTipText="Sort key for the input, in JSON format. Sort by the emit key to optimize performance."/>
                                <IntSpinner id="mrLimit" label="Limit" toolTipText="Limit of the number of input entries to process" minValue="0"/>
                            </Div>
                            <Div id="output" titled="true">
                                <ComboBox id="mrType" label="Output Type" items="replace;merge;reduce;inline" toolTipText="How to process the output"/>
                                <TextField id="mrOut" label="Output Collection" toolTipText="Name of the output collection" nonEmpty="true"/>
                                <TextField id="mrOutDB" label="Output Database" toolTipText="Name of the output database, if different from the input database"/>
                                <CheckBox id="mrOutSharded" label="Sharded Output" value="false" toolTipText="If true, the result collection will be sharded using the _id key."/>
                                <CheckBox id="mrNonAtomic" label="Non Atomic" value="false" toolTipText="If true, the output will be applied without taking a lock, which means partial results can be seen." />
                            </Div>
                            <CheckBox id="mrJSMode" value="false" label="JS Mode"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="geoNear" call="geoNear">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="gnOrigin" label="Origin" toolTipText="Point of origin, in JSON format"/>
                            <IntSpinner id="gnNum" label="Num" toolTipText="Maximum number of entries to return" minValue="0" value="100"/>
                            <IntSpinner id="gnMaxDistance" label="Max Distance" toolTipText="Maximum distance from the point of origin" minValue="0"/>
                            <DoubleSpinner id="gnDistanceMultiplier" label="Distance Multiplier" toolTipText="Distance multiplier" minValue="0"/>
                            <com.edgytech.umongo.DocBuilderField id="gnQuery" label="Query" toolTipText="Query to filter the results by, in JSON format"/>
                            <CheckBox id="gnSpherical" label="Spherical" toolTipText="Takes into account that earth is a sphere. Coordinates must be in decimal degrees and the distance must be in radians (divide by 6371 km or 3959 miles)."/>
                            <com.edgytech.umongo.DocBuilderField id="gnSearch" label="Search" toolTipText="Search criteria for geo haystack indexing, in JSON format"/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
                <Menu id="document">
                    <MenuItem id="find" call="find" key="f" keyMod="cmd+shift">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="findQuery" label="Query" toolTipText="Query to find by, in JSON format"/>
                            <com.edgytech.umongo.DocBuilderField id="findFields" label="Fields" toolTipText="Fields to include in results, in JSON format"/>
                            <com.edgytech.umongo.DocBuilderField id="findSort" label="Sort" toolTipText="Sort object, in JSON format"/>
                            <IntSpinner id="findSkip" label="Skip" minValue="0" value="0" toolTipText="Number of documents to skip"/>
                            <IntSpinner id="findLimit" label="Limit" minValue="0" value="0" toolTipText="Maximum number of documents to return"/>
                            <IntSpinner id="findBatchSize" label="Batch Size" value="0" toolTipText="If positive, the ideal batch size to return from server. If negative, instructs the server to close the cursor after 1 batch of given size."/>
                            <com.edgytech.umongo.DocBuilderField id="findHint" label="Hint" value="" toolTipText="Object with keys that represent the index to use. Use '$natural' to force full scan."/>
                            <CheckBox id="findExplain" label="Explain" toolTipText="Explain the find processing"/>
                            <CheckBox id="findExport" label="Export to File" toolTipText="Export to file, like mongoexport utility"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="findOne" call="findOne" key="o" keyMod="cmd+shift">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="foQuery" label="Query" toolTipText="Query to find by, in JSON format"/>
                            <com.edgytech.umongo.DocBuilderField id="foFields" label="Fields" toolTipText="Fields to include in results, in JSON format"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="count" call="count" key="c" keyMod="cmd+shift">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="countQuery" label="Query" toolTipText="Query to find by, in JSON format"/>
                            <IntSpinner id="countSkip" label="Skip" minValue="0" value="0" toolTipText="Number of documents to skip"/>
                            <IntSpinner id="countLimit" label="Limit" minValue="0" value="0" toolTipText="Maximum number of documents to return"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="insert" call="insert">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="insertDoc" label="JSON Document" toolTipText="Document to insert in JSON format" nonEmpty="true"/>
                            <IntSpinner id="insertCount" label="Insert Count" minValue="1" value="1" toolTipText="Number of documents to insert"/>
                            <CheckBox id="insertBulk" label="Bulk Insert" value="false" toolTipText="If multiple objects are inserted, use the bulk operation, faster but uses more memory."/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="save" call="save">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="saveDoc" label="JSON Document" toolTipText="Document to save in JSON format" nonEmpty="true"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="update" call="update">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="upQuery" label="Query" toolTipText="Query to match, in JSON format"/>
                            <com.edgytech.umongo.DocBuilderField id="upUpdate" label="Update" toolTipText="Update to apply to document, in JSON format" nonEmpty="true"/>
                            <CheckBox id="upUpsert" label="Upsert" toolTipText="Insert document if not present"/>
                            <CheckBox id="upMulti" label="Multi" toolTipText="Update all matched documents"/>
                            <CheckBox id="upSafe" label="Safe" toolTipText="Displays a confirmation dialog with count information before applying update."/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="remove" call="remove">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="removeQuery" label="Query" toolTipText="Query to remove by, in JSON format"/>
                        </FormDialog>
                        <ConfirmDialog id="rmAllConfirm" text="Are you sure you want to remove all documents?"/>
                    </MenuItem>
                    <MenuItem id="findAndModify" call="findAndModify">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="famQuery" label="Query" toolTipText="Query to match, in JSON format"/>
                            <com.edgytech.umongo.DocBuilderField id="famFields" label="Fields" toolTipText="Fields to be returned, in JSON format"/>
                            <com.edgytech.umongo.DocBuilderField id="famSort" label="Sort" toolTipText="Sort to find 1st document by, in JSON format"/>
                            <com.edgytech.umongo.DocBuilderField id="famUpdate" label="Update" toolTipText="Update to apply to document, in JSON format"/>
                            <CheckBox id="famRemove" label="Remove" toolTipText="Remove the document found"/>
                            <CheckBox id="famReturnNew" label="Return New" toolTipText="Return the document after update"/>
                            <CheckBox id="famUpsert" label="Upsert" toolTipText="Insert document if not present"/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
                <Menu id="sharding">
                    <MenuItem id="shardingInfo" call="shardingInfo"/>
                    <MenuSeparator/>
                    <MenuItem id="shardCollection" call="shardCollection" showDialog="false">
                        <FormDialog>
                            <Text value="Either pick a key from an existing index, or specify your own"/>
                            <ComboBox id="shardKeyCombo" label="Existing Key" items="None" toolTipText="Choose this option if you want to use an existing index for sharding"/>
                            <com.edgytech.umongo.DocBuilderField id="shardCustomKey" label="Custom Key" toolTipText="Specify a custom shard key. An index may be created to back that key."/>
                            <CheckBox id="shardUniqueIndex" label="Unique" toolTipText="If true, will make sure the underlying index has a unique constraint." value="false"/>
                            <Text text="Choose the shard key carefully, this operation cannot be undone."/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="findChunks" call="findChunks"/>
                    <MenuItem id="moveChunk" call="moveChunk" showDialog="false">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="mvckQuery" label="Chunk Query" toolTipText="Query to find the chunk by" nonEmpty="true"/>
                            <ComboBox id="mvckToShard" label="To Shard" items="None" toolTipText="Shard to send the chunk to"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="splitChunk" call="splitChunk">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="spckQuery" label="Chunk Query" toolTipText="Query to find the chunk by" nonEmpty="true"/>
                            <CheckBox id="spckOnValue" label="Split on Value" value="false" toolTipText="If true, split chunk on provided query value, otherwise split chunk in the middle"/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
                <Menu id="tools">
                    <MenuItem id="validate" call="validate">
                        <FormDialog>
                            <CheckBox id="validateFull" label="Full" toolTipText="Turns on full validation, which is slower"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="touch" call="touch" label="Bring To Memory">
                        <FormDialog>
                            <CheckBox id="touchData" label="Data" value="false" toolTipText="Touch the data"/>
                            <CheckBox id="touchIndex" label="Index" value="true" toolTipText="Touch the indexes"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="compact" call="compact">
                        <FormDialog>
                            <CheckBox id="compactForce" label="Force" toolTipText="Force compaction even if ran on the primary server"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="reIndex" call="reIndex"/>
<!--                    <MenuItem id="fixCollection" call="fixCollection" showDialog="false">
                        <FormDialog id="fcDialog">
                            <ComboBox id="fcSrcMongo" label="Source Mongo" toolTipText="Pick one of the other Mongo instances as source"/>
                            <CheckBox id="fcUpsert" label="Upsert" toolTipText="If checked, operation will be upsert instead of insert"/>
                        </FormDialog>
                    </MenuItem>-->
                    <MenuSeparator/>
                    <MenuItem id="options" call="options"/>
                    <CheckBoxMenuItem id="lazyDecoding" value="false"/>
                </Menu>
            </MenuBar>
            <Zone zone="CENTER">
                <Div zone="NORTH" gap="true" bgColor="255;255;255">
                    <Text id="name" field="true"/>
                    <Text id="fullName" field="true"/>
                    <Text id="queryOptions" field="true"/>
                    <com.edgytech.umongo.DocField id="writeConcern"/>
                    <com.edgytech.umongo.DocField id="readPreference"/>
                    <com.edgytech.umongo.CmdField id="stats" cmd="collstats"/>
                </Div>
            </Zone>
        </com.edgytech.umongo.CollectionPanel>
        <com.edgytech.umongo.IndexPanel id="indexPanel">
            <MenuBar id="menu" zone="NORTH" minHeight="50" prefHeight="50">
                <Text id="icon" icon="index.png" iconGroup="icons" toolTipText="Index"/>
                <Menu id="index">
                    <MenuItem id="refresh" label="Refresh" call="refresh" icon="stock_refresh.png" iconGroup="icons" key="r" keyMod="cmd+shift"/>
                    <MenuItem id="drop" label="Drop" call="drop" icon="stock_delete.png" iconGroup="icons">
                        <ConfirmDialog text="Are you sure you want to drop this index?"/>
                    </MenuItem>
                </Menu>
                <Menu id="command">
                    <MenuItem id="stats" call="stats"/>
                </Menu>
            </MenuBar>
            <Zone zone="CENTER">
                <Div zone="NORTH" gap="true" bgColor="255;255;255">
                    <Text id="name" field="true"/>
                    <Text id="ns" label="NS" field="true"/>
                    <com.edgytech.umongo.DocField id="key"/>
                    <com.edgytech.umongo.DocField id="info"/>
                </Div>
            </Zone>
        </com.edgytech.umongo.IndexPanel>
        <com.edgytech.umongo.ServerPanel id="serverPanel">
            <MenuBar id="menu" zone="NORTH" minHeight="50" prefHeight="50">
                <Text id="icon" icon="server.png" iconGroup="icons" toolTipText="Server"/>
                <Menu id="server">
                    <MenuItem id="refresh" label="Refresh" call="refresh" icon="stock_refresh.png" iconGroup="icons" key="r" keyMod="cmd+shift"/>
                </Menu>
                <Menu id="command">
                    <MenuItem id="serverStatus" call="serverStatus"/>
                    <MenuItem id="serverBuildInfo" call="serverBuildInfo"/>
                    <MenuItem id="isMaster" call="isMaster"/>
                    <MenuSeparator/>
                    <MenuItem id="currentOps" call="currentOps">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="currentOpsQuery" label="Query Filter" toolTipText="Optional, a query to filter operations. Use {'$all': 1} to also see internal commands."/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="killOp" call="killOp">
                        <FormDialog>
                            <IntField id="killOpId" label="opid" toolTipText="ID of the operation to kill, should be visible from Current Ops"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="setParameter" call="setParameter">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="setParameterValue" label="Parameter" nonEmpty="true" toolTipText="Modify a parameter without restarting the server, for example {logLevel: 4}"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="setLogLevel" call="setLogLevel">
                        <FormDialog>
                            <IntSpinner id="setLogLevelValue" label="Level" value="0" toolTipText="Set the log level, 0 is default"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="getLog" call="getLog">
                        <FormDialog>
                            <ComboBox id="getLogType" label="Log Type" value="0" items="global;startupWarnings;rs" toolTipText="The log type, 'global' means all."/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
                <Menu id="replica">
                    <MenuItem id="rsConfig" call="rsConfig" label="Config"/>
                    <MenuItem id="rsStatus" call="rsStatus" label="Status"/>
                    <MenuItem id="rsOplogInfo" call="rsOplogInfo" label="Oplog Info"/>
                    <MenuSeparator/>
                    <MenuItem id="rsStepDown" call="rsStepDown" label="Step Down" toolTipText="If primary, the server will step down to secondary to let another server be elected."/>
                    <MenuItem id="rsFreeze" call="rsFreeze" label="Freeze" toolTipText="This server will not attempt to become primary for next N seconds">
                        <FormDialog>
                            <IntField id="rsFreezeTime" label="Freeze Time (Sec)" toolTipText="Time to freeze for, in seconds. If 0, it will unfreeze the server." value="60"/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
            </MenuBar>
            <Zone zone="CENTER">
                <Div zone="NORTH" gap="true" bgColor="255;255;255">
                    <Text id="host" field="true"/>
                    <Text id="address" field="true"/>
                    <Text id="replication" field="true" toolTipText="Replication status" icon="overlay/tick_circle.png" iconGroup="icons"/>
                    <Text id="maxObjectSize" field="true"/>
<!--                    <Text id="journaling" field="true" icon="overlay/shield_blue.png" iconGroup="icons"/>-->
                </Div>
            </Zone>
        </com.edgytech.umongo.ServerPanel>
        <com.edgytech.umongo.ReplSetPanel id="replSetPanel">
            <MenuBar id="menu" zone="NORTH" minHeight="50" prefHeight="50">
                <Text id="icon" icon="replSet.png" iconGroup="icons" toolTipText="Server"/>
                <Menu id="replSet" label="ReplicaSet">
                    <MenuItem id="refresh" label="Refresh" call="refresh" icon="stock_refresh.png" iconGroup="icons" key="r" keyMod="cmd+shift"/>
                    <MenuSeparator/>
                    <MenuItem id="initiate" call="initiate">
                        <com.edgytech.umongo.DocBuilderField id="initConfig" label="Config" toolTipText="An object representing the configuration. Leave empty to start with a single server."/>
                    </MenuItem>
                    <MenuItem id="reconfigure" call="reconfigure" showDialog="false">
                        <FormDialog>
                            <com.edgytech.umongo.DocBuilderField id="reconfConfig" label="Config" toolTipText="An object representing the new configuration." nonEmpty="true"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="addReplica" call="addReplica">
                        <FormDialog>
                            <TextField id="arHost" label="Host" toolTipText="Name of host to add to the replica set" nonEmpty="true"/>
                            <CheckBox id="arArbiterOnly" label="Arbiter only" toolTipText="Whether this replica should be an arbiter only, with no data" value="false"/>
                            <CheckBox id="arHidden" label="Hidden" toolTipText="If true, the replica will not be seen by the client applications (e.g. backup only server)" value="false"/>
                            <DoubleSpinner id="arPriority" label="Priority" toolTipText="Priority of the replica to become primary, between 0 and 1000 (1 is default, 0 means never primary)" minValue="0" maxValue="1000" value="1"/>
                            <com.edgytech.umongo.DocBuilderField id="arTags" label="Tags" toolTipText="An object representing tags for this server"/>
                            <IntSpinner id="arSlaveDelay" label="Slave delay" minValue="0" value="0" toolTipText="Time in second to remain behind the primary"/>
                            <IntSpinner id="arVotes" label="Votes" minValue="0" value="1" toolTipText="Number of votes for this replica. This option should generally be set to 1."/>
                            <CheckBox id="arIgnoreIndexes" label="Ignore indexes" toolTipText="If true, the replica will not build indexes (e.g. backup only server)" value="false"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="removeReplica" call="removeReplica" showDialog="false">
                        <FormDialog>
                            <ComboBox id="rrHost" label="Host" items="None" toolTipText="Name of host to remove"/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
                <Menu id="command">
                    <MenuItem id="rsConfig" call="rsConfig" label="Config"/>
                    <MenuItem id="rsStatus" call="rsStatus" label="Status"/>
                    <MenuItem id="rsOplogInfo" call="rsOplogInfo" label="Oplog Info"/>
                </Menu>
                <Menu id="tools">
                    <MenuItem id="compareReplicas" call="compareReplicas">
                        <FormDialog>
                            <Text value="This tool will compare all replicas, stop writing to the db for better accuracy."/>
                            <ComboBox id="crStat" label="Comparison Stat" items="Count;Data Size" toolTipText="What to compare"/>
                        </FormDialog>
                    </MenuItem>
                </Menu>
            </MenuBar>
            <Zone zone="CENTER">
                <Div zone="NORTH" gap="true" bgColor="255;255;255">
                    <Text id="name" field="true"/>
                    <Text id="maxObjectSize" field="true"/>
                    <Text id="replicas" field="true"/>
                </Div>
            </Zone>
        </com.edgytech.umongo.ReplSetPanel>
        <com.edgytech.umongo.RouterPanel id="routerPanel">
            <MenuBar id="menu" zone="NORTH" minHeight="50" prefHeight="50">
                <Text id="icon" icon="s.png" iconGroup="icons" toolTipText="MongoS router"/>
                <Menu id="router" label="MongoS">
                    <MenuItem id="refresh" label="Refresh" call="refresh" icon="stock_refresh.png" iconGroup="icons" key="r" keyMod="cmd+shift"/>
                </Menu>
                <Menu id="sharding">
                    <MenuItem id="listShards" call="listShards"/>
                    <MenuItem id="flushConfiguration" call="flushConfiguration"/>
                    <MenuSeparator/>
                    <MenuItem id="addShard" call="addShard">
                        <FormDialog>
                            <TextField id="asHost" label="Server Names" toolTipText="Comma-separated list of seed servers for that shard" nonEmpty="true"/>
                            <TextField id="asReplSetName" label="Replica Set Name" toolTipText="If adding a replica set, the replica set name"/>
                            <TextField id="asShardName" label="Shard Name" toolTipText="Optional, the shard name"/>
                            <IntSpinner id="asMaxSize" label="Max Size MB" minValue="0" toolTipText="Maximum size in megabytes to store in the shard"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuItem id="removeShard" call="removeShard" showDialog="false">
                        <FormDialog>
                            <ComboBox id="rsShard" label="Shard" items="None" toolTipText="Shard to remove"/>
                        </FormDialog>
                    </MenuItem>
                    <MenuSeparator/>
                    <MenuItem id="balancer" call="balancer" showDialog="false">
                        <FormDialog>
                            <ComboBox id="balStopped" label="Stopped" items="Default;True;False" value="0" toolTipText="If checked, the balancer will not run."/>
                            <ComboBox id="balSecThrottle" label="Secondary Throttle" items="Default;True;False" value="0" toolTipText="If checked, migrations will use secondary throttle, which makes them slower but less impactful"/>
                            <Div id="activeWindow" titled="true">
                                <TextField id="balStartTime" label="Start Time" toolTipText="Start time for balancer, in HH:MM format local time"/>
                                <TextField id="balStopTime" label="Stop Time" toolTipText="Stop time for balancer, in HH:MM format local time"/>
                            </Div>
                        </FormDialog>
                    </MenuItem>
                </Menu>
                <Menu id="tools">
                    <MenuItem id="regenConfigDB" label="Regenerate Config DB" call="regenConfigDB">
                        <FormDialog okLabel="start">
<!--                            <TextField id="regenServers" label="Servers" toolTipText="Comma-separated list of servers (host:port) containing the data. You must provide at least one available server per shard."/> -->
                            <TextArea id="regenServers" label="Servers" rows="10" columns="50" editable="true" toolTipText="List of servers containing the data, one by line, in format host:port/shardName. You must provide at least one available server per shard." nonEmpty="true"/>
                            <TextField id="regenDB" label="Database" toolTipText="Database to scan" nonEmpty="true"/>
                            <TextField id="regenCollection" label="Collection" toolTipText="Collection to scan" nonEmpty="true"/>
                            <com.edgytech.umongo.DocBuilderField id="regenShardKey" label="Sharding Key" nonEmpty="true"/>
                            <CheckBox id="regenKeyUnique" label="Unique Key" toolTipText="Whether sharding key is unique" value="false"/>
                        </FormDialog>
                        <FormDialog id="regenRSList" label="Replica Set List" okLabel="Next">
                            <Text value="Check that the following information is correct and complete..."/>
                            <TextArea id="regenRSListArea" label="Replica Sets" rows="10" columns="50" editable="false"/>
                        </FormDialog>
                        <ConfirmDialog id="regenDeleteChunks" label="Confirm Delete" text="There are existing chunks for this NS. Delete chunks? (Cannot be undone)" okLabel="Continue"/>
                        <ConfirmDialog id="regenConfirm" label="Start Regen" text="Regenerating the config DB may take a long time and read a lot of data from your DBs. Do you want to continue?" okLabel="Continue"/>
                    </MenuItem>
                </Menu>
            </MenuBar>
            <Zone zone="CENTER">
                <Div zone="NORTH" gap="true" bgColor="255;255;255">
                    <Text id="host" field="true"/>
                    <Text id="address" field="true"/>
                    <com.edgytech.umongo.DocField id="shards"/>
                </Div>
            </Zone>
        </com.edgytech.umongo.RouterPanel>
        <com.edgytech.umongo.EditBinaryDialog>
            <IntSpinner id="size"/>
        </com.edgytech.umongo.EditBinaryDialog>
        <com.edgytech.umongo.EditBooleanDialog>
            <CheckBox id="value" label="True"/>
        </com.edgytech.umongo.EditBooleanDialog>
        <com.edgytech.umongo.EditCodeDialog>
            <TextField id="value" label="Code"/>
            <TextField id="scope"/>
        </com.edgytech.umongo.EditCodeDialog>
        <com.edgytech.umongo.EditDateDialog>
            <DateSpinner id="value" label="Date"/>
        </com.edgytech.umongo.EditDateDialog>
        <com.edgytech.umongo.EditDoubleDialog>
            <DoubleSpinner id="value"/>
        </com.edgytech.umongo.EditDoubleDialog>
        <com.edgytech.umongo.EditLongDialog>
            <LongSpinner id="value"/>
        </com.edgytech.umongo.EditLongDialog>
        <com.edgytech.umongo.EditObjectIdDialog>
            <Text value="Fill in either a String, or values, or leave blank to auto-generate"/>
            <TextField id="string" toolTipText="A 24 character string describing the id"/>
            <IntSpinner id="time" toolTipText="Creation time in second"/>
            <IntSpinner id="machine" toolTipText="Value identifying the machine and process"/>
            <IntSpinner id="inc" toolTipText="Incremental value, to ensure uniqueness within a second"/>
            <Text id="currentTime" field="true"/>
            <Text id="currentMachine" field="true"/>
            <Text id="currentInc" field="true"/>
            <Text value="Add a namespace to make a DBRef"/>
            <TextField id="namespace" toolTipText="Namespace identifying the collection of the reference"/>
        </com.edgytech.umongo.EditObjectIdDialog>
        <com.edgytech.umongo.EditPatternDialog>
            <TextField id="value"/>
        </com.edgytech.umongo.EditPatternDialog>
        <com.edgytech.umongo.EditStringDialog>
            <TextField id="value"/>
        </com.edgytech.umongo.EditStringDialog>
        <com.edgytech.umongo.EditTimestampDialog>
            <IntSpinner id="time"/>
            <IntSpinner id="increment"/>
        </com.edgytech.umongo.EditTimestampDialog>
        <com.edgytech.umongo.EditUuidDialog>
            <TextField id="value"/>
        </com.edgytech.umongo.EditUuidDialog>
        <com.edgytech.umongo.DocBuilderDialog id="docBuilderDialog" buttons="OK_CANCEL">
            <Scroller preferredSize="600;400">
                <Zone>
                    <Div id="div" zone="CENTER"/>
                </Zone>
            </Scroller>
        </com.edgytech.umongo.DocBuilderDialog>
        <com.edgytech.umongo.JSONTextDialog id="jsonTextDialog" buttons="OK_CANCEL" preferredSize="640;480" helpFile="/html/jsonFormatHelp.html">
            <Zone>
                <TextArea id="expandTextArea" field="false" zone="CENTER"/>
                <Div axis="Y" zone="EAST">
                    <Button id="convertFromJS" icon="wand.png" iconGroup="icons" toolTipText="Convert from shell JSON to Java JSON e.g. ObjectId(), ISODate()" call="convertFromJS"/>
                    <Button id="indent" icon="indent.png" iconGroup="icons" toolTipText="Indent the JSON" call="indent"/>
                </Div>
            </Zone>
        </com.edgytech.umongo.JSONTextDialog>
    </com.edgytech.umongo.GlobalStore>
    <Frame id="frame" title="UMongo" masterFrame="true" menuId="mainmenu" icon="mongo_leaf_32.png" iconGroup="icons" contexts="default;Connect" preferredSize="1100;700" bgColor="255;255;255">
        <com.edgytech.umongo.MainMenu id="mainMenu" start="start">
            <Menu id="file" alt="f">
                <MenuItem id="connect" alt="c" key="k" keyMod="cmd" call="connect">
                    <com.edgytech.umongo.ConnectDialog id="connectDialog" helpFile="/html/connectHelp.html">
                        <Text value="Either provide a URI ..."/>
                        <DynamicComboBox id="uri" label="URI" toolTipText="the MongoDB URI like 'mongodb://...'" items="" value="0" editable="true" recordItems="true"/>
                        <Text value="Or the settings below"/>
                        <DynamicComboBox id="servers" toolTipText="Comma separated list of servers to connect to" items="localhost:27017" value="0" editable="true" recordItems="true"/>
                        <TextField id="databases" toolTipText="Optional, a comma separated list of databases to use"/>
                        <TextField id="user" toolTipText="Optional, the user name for authentication"/>
                        <PasswordField id="password" toolTipText="Optional, the password for authentication"/>
                        <!--                        <Div id="connectionPool" titled="true">
                            <IntSpinner id="connectionsPerHost" minValue="1" value="10" toolTipText="Maximum number of concurrent connections for one server"/>
                            <IntSpinner id="blockingThreadMultiplier" minValue="0" value="5" toolTipText="This value multiplied by the maximum number of connections, gives how many threads are allowed to wait on a connection to be available."/>
                            <IntSpinner id="maxWaitTime" minValue="0" value="120000" toolTipText="Maximum time in milliseconds that a thread should wait for a connection to be available"/>
                        </Div> -->
                        <Div id="connection" titled="true">
                            <ComboBox id="socketType" value="0" items="Plain;SSL;SSL no validation" toolTipText="Type of socket to use."/>
                            <IntSpinner id="connectTimeout" minValue="0" value="2000" toolTipText="Timeout for the socket connect operation"/>
                            <IntSpinner id="socketTimeout" minValue="0" value="0" toolTipText="Timeout for the socket read/write operations"/>
<!--                            <CheckBox id="autoConnectRetry" value="false" toolTipText="If true, then driver will keep retrying to connect to the server in case of connection failure"/>-->
                            <CheckBox id="safeWrites" value="true" toolTipText="Sets the global WriteConcern as SAFE, which means that writes are acknowledged by the server"/>
                            <CheckBox id="secondaryReads" value="false" toolTipText="Allows the read operations to go to secondary servers"/>
                        </Div>
                        <Div id="proxy" titled="true">
                            <ComboBox id="proxyType" label="Type" value="0" items="None;SOCKS" toolTipText="Type of proxy"/>
                            <TextField id="proxyHost" label="Host" value="localhost" toolTipText="The proxy host"/>
                            <IntSpinner id="proxyPort" label="Port" minValue="0" value="9000" toolTipText="The proxy port"/>
<!--                            <TextField id="proxyUser" toolTipText="The proxy username"/>
                            <PasswordField id="proxyPassword" toolTipText="The proxy password"/>-->
                        </Div>
                    </com.edgytech.umongo.ConnectDialog>
                    <ProgressDialog id="connectProgressDialog" buttons="Cancel" text="Adding Mongo instance ...">
                        <ProgressBar id="progressBar" determinate="false"/>                        
                    </ProgressDialog>
                </MenuItem>
                <MenuSeparator/>
                <MenuItem id="exit" label="Quit" alt="q" key="q" keyMod="cmd" call="exit"/>
            </Menu>
            <Menu id="tools" alt="o">
                <MenuItem id="importFile" alt="i" call="importFile"/>
                <MenuSeparator/>
                <MenuItem id="preferences" alt="p" key="comma" keyMod="cmd">
                    <com.edgytech.umongo.AppPreferences id="prefDialog" start="start">
                        <TabbedDiv id="optionTabs">
                            <Div id="general" gap="true">
                                <Div id="view" gap="true" titled="true">
                                    <IntSpinner id="treeUpdateRate" minValue="0" step="1000" value="0" toolTipText="Rate in ms at which to update the Tree information (server down, master, etc). 0 means no automatic updating."/>
                                    <IntSpinner id="inlineDocumentLength" minValue="1" value="200" toolTipText="Number of characters to display for the document inline preview"/>
                                </Div>
                                <Div id="querying" gap="true" titled="true">
                                    <IntSpinner id="getMoreSize" minValue="1" value="50" toolTipText="Number of documents to fetch when getting more results from a cursor"/>
                                </Div>
                            </Div>
                            <Div id="advanced" gap="true">
                                <Div id="lookAndFeel" gap="true" titled="true">
                                    <CheckBox id="useSystemLook" label="Use Native Look *" value="true"/>
                                </Div>
                            </Div>
                        </TabbedDiv>
                        <Text value="* setting requires an application restart."/>
                    </com.edgytech.umongo.AppPreferences>
                </MenuItem>
            </Menu>
            <Menu id="help" alt="h">
                <MenuItem id="about" alt="a">
                    <InfoDialog signIcon="edgytech-small.png" signIconGroup="etIcons" signBorderColor="128;128;128" file="/html/about.html"/>
                </MenuItem>
            </Menu>
        </com.edgytech.umongo.MainMenu>
        <Zone id="mainZone" bgColor="255;255;255">
<!--            <com.edgytech.umongo.MainToolBar id="mainToolBar" zone="NORTH" minHeight="50" prefHeight="50" start="start" stop="stop" contexts="Connect">
                <ToolBarSeparator/>
                <MemoryBar id="memBar" focusable="false" maximumSize="120;-1"/>
            </com.edgytech.umongo.MainToolBar> -->
            <SplitPane axis="X" zone="CENTER" resizeWeight="0.2" bgColor="255;255;255">
                <Scroller id="treeScroll" preferredSize="125;-1" maximumSize="125;-1" verticalSpeed="50">
                    <Tree id="tree" label="Mongo Instances" bgColor="255;255;255">
<!-- pop up doesnt work well on root                       <PopUpMenu>
                            <MenuItem id="connect" bind="frame.mainMenu.file.connect"/>
                        </PopUpMenu> -->
                    </Tree>
                </Scroller>
                <SplitPane axis="Y" resizeWeight="0.3">
                    <Scroller preferredSize="-1;300">
                        <com.edgytech.umongo.Workspace id="workspace" bgColor="255;255;255"/>
                    </Scroller>
                    <TabbedDiv id="tabbedResult" preferredSize="-1;700" layout="SCROLL" bgColor="255;255;255" opaque="false"/>
                </SplitPane>
            </SplitPane>
            <Div id="jobDiv" axis="X" gap="true" zone="SOUTH" bgColor="255;255;255">
                <Text value="Jobs:"/>
                <Scroller>
                    <com.edgytech.umongo.JobBar id="jobBar" axis="X" preferredSize="-1;30"  bgColor="255;255;255" opaque="false"/>
                </Scroller>
            </Div>
        </Zone>
    </Frame>
</com.edgytech.umongo.UMongo>
